# 附录 1 C 语言占位符详解

## **占位符**

当你在C语言中使用格式化输出函数（例如printf）时，你会使用占位符来指定输出的数据类型和格式。这些占位符告诉编译器要在输出中插入哪种类型的数据，并且指定输出的格式，如十进制、浮点数等。

以下是一些常见的C语言中使用的占位符及其用法、示例和对应 C 语言关键字的整合表格。

| 占位符  | 描述                                                                    | C语言关键字             |
|------|-----------------------------------------------------------------------|--------------------|
| %d   | 用于输出十进制整数（带符号）。例如，printf("%d", 10); 输出10。                             | int                |
| %u   | 用于输出无符号十进制整数。例如，printf("%u", 10); 输出10。                               | unsigned int       |
| %ld  | 用于输出长整型十进制整数（带符号）。例如，printf("%ld", 10000000000L); 输出10000000000。      | long               |
| %lu  | 用于输出无符号长整型十进制整数。例如，printf("%lu", 10000000000UL); 输出10000000000。       | unsigned long      |
| %lld | 用于输出长长整型十进制整数（带符号）。例如，printf("%lld", 100000000000LL); 输出100000000000。 | long long          |
| %llu | 用于输出无符号长长整型十进制整数。例如，printf("%llu", 100000000000ULL); 输出100000000000。  | unsigned long long |
| %x   | 用于输出十六进制整数（小写字母）。例如，printf("%x", 16); 输出10。                           | int                |
| %X   | 用于输出十六进制整数（大写字母）。例如，printf("%X", 16); 输出10。                           | int                |
| %o   | 用于输出八进制整数。例如，printf("%o", 8); 输出10。                                   | int                |
| %f   | 用于输出浮点数。例如，printf("%f", 3.14); 输出3.140000。                            | float, double      |
| %e   | 用于以指数形式输出浮点数（小写字母e）。例如，printf("%e", 123.45); 输出1.234500e+02。          | float, double      |
| %E   | 用于以指数形式输出浮点数（大写字母E）。例如，printf("%E", 123.45); 输出1.234500E+02。          | float, double      |
| %g   | 用于以%f或%e中较短的形式输出浮点数。例如，printf("%g", 123.45); 输出123.45。                | float, double      |
| %c   | 用于输出单个字符。例如，printf("%c", 'A'); 输出A。                                   | char               |
| %s   | 用于输出字符串。例如，printf("%s", "Hello"); 输出Hello。                            | char\*             |
| %p   | 用于输出指针地址。例如，int \*ptr; printf("%p", (void\*)ptr); 输出指针ptr的地址。         | void\*             |
| %%   | 用于输出百分号（%）。例如，printf("%%"); 输出%。                                      | 无                  |

这些占位符可以在printf、fprintf和sprintf等函数中使用，并且可以与其他格式化标志一起使用，例如精度、宽度、对齐等。

## **高阶使用方法**

当使用C语言中的格式化输出函数（如printf）时，除了使用占位符指定要输出的数据类型外，还可以通过添加一些修饰符来控制输出的格式。这些修饰符包括精度修饰符、宽度修饰符和对齐修饰符。

### 精度修饰符

精度修饰符指定了输出的数字的小数部分的位数（对于浮点数）或者输出的字符数（对于字符串）。精度修饰符放置在占位符中的"."后面，后接一个整数，表示输出的小数位数或字符数。

```c
printf("%.2f", 3.1415926); // 输出 3.14
printf("%.5s", "Hello, World"); // 输出 Hello
```

在第一个示例中，精度修饰符".2"指定了输出浮点数时保留两位小数。在第二个示例中，精度修饰符".5"指定了输出字符串时只输出前五个字符。

### 宽度修饰符

宽度修饰符指定了输出的字段的最小宽度。默认情况下，如果输出的数据宽度小于指定的宽度，会用空格在左边补齐，使得整个输出的宽度达到指定值。宽度修饰符放置在占位符中的数字部分前面。

```c
printf("%10d", 123); // 输出 "       123"，总宽度为10，不足的用空格填充
printf("%-10s", "Hello"); // 输出 "Hello     "，总宽度为10，不足的用空格填充
```

在第一个示例中，"%10d"指定了输出整数时总宽度为10，不足的用空格填充，所以输出的数字123前面有7个空格。在第二个示例中，"%-10s"指定了输出字符串时总宽度为10，不足的用空格填充，但是使用了"-"标志，表示左对齐输出。

### 对齐修饰符

对齐修饰符用于指定输出的对齐方式，包括左对齐、右对齐和居中对齐。默认情况下，输出的数据是右对齐的。左对齐通过在宽度修饰符前加上"-"实现，居中对齐通过在宽度修饰符前加上"-"和"*"实现。

```c
printf("%-10d", 123); // 左对齐
printf("%10d", 123); // 右对齐
printf("%*s", 10, "Hello"); // 居中对齐
```

在第一个示例中，"%-10d"指定了左对齐输出整数。在第二个示例中，"%10d"指定了右对齐输出整数。在第三个示例中，"%*s"指定了使用"*"作为宽度修饰符，后面跟着一个整数，表示总宽度为10，字符串"Hello"会居中显示。